(this["webpackJsonpproject-barabom"]=this["webpackJsonpproject-barabom"]||[]).push([[0],{104:function(e,n){},108:function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"injectPlayer",(function(){return He})),t.d(r,"getTracks",(function(){return Ue})),t.d(r,"appendTracks",(function(){return We})),t.d(r,"play",(function(){return Je}));var a,c,o,i,s,l=t(0),d=t(31),b=t.n(d),u=(t(69),t(9)),p=t(10),f=t.n(p),j=t(56),h=t(33),x=t(13),m=t(42),O=t.n(m).a.create(),g=t(57),v=t.n(g)()({apikey:"85630c3b7613261a33b769967c59621b"}),y=function(e,n){return v.matcherLyrics({q_artist:e,q_track:n})},k=t(5),w=t(4),_=t(2);var S,z,C,I,L,N,T,P,R,Y,Z,A,B,D,E,F,X,q,M,H,U,W=w.c.div(a||(a=Object(k.a)(["\n  z-index: 255;\n\n  position: fixed;\n  top: 0;\n  left: 0;\n\n  width: 100vw;\n  height: 100vh;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  background-color: #fff;\n\n  padding: 3rem;\n  box-sizing: border-box;\n\n  overflow-x: hidden;\n\n  transition: 0.7s;\n"]))),J=Object(w.d)(c||(c=Object(k.a)(["\n    50% {\n      transform: translateY(-30px) scale(0.5);\n    } 90% {\n      transform: translateY(0) scale(0.5);  \n    } 100% {\n        transform: translateY(0) scale(1);  \n    }\n"]))),Q=Object(w.d)(o||(o=Object(k.a)(["\n    from {\n        transform: rotateZ(0);\n    } to {\n        transform: rotateZ(-20deg);\n    }\n"]))),G=w.c.h1(i||(i=Object(k.a)(["\n  font-style: normal;\n  font-weight: 300;\n  text-transform: uppercase;\n\n  font-size: 32px;\n  line-height: 40px;\n  letter-spacing: 0.2em;\n\n  @media "," {\n    font-size: 14px;\n    line-height: 28px;\n    letter-spacing: 0.2em;\n  }\n\n  & > em {\n    display: inline-block;\n  }\n\n  & > em.hi {\n    transform-origin: 50% 100%;\n  }\n\n  & > em:not(.hi) {\n    animation: "," 3s forwards;\n  }\n\n  & > .first {\n    transform: translateY(-30px) translateX(-100px) scale(0.5);\n  }\n\n  & > .second {\n    transform: translateY(-30px) translateX(600px) scale(0.5);\n  }\n\n  & > .third {\n    transform: translateY(-30px) translateX(-800px) scale(0.5);\n  }\n\n  & > .fourth {\n    transform: translateY(-30px) translateX(100px) scale(0.5);\n  }\n\n  ","\n"])),(function(e){return e.theme.device.mobile}),J,(function(e){return e.hiAni&&Object(w.b)(s||(s=Object(k.a)(["\n      & > .hi {\n        animation: "," 0.7s 4 linear alternate forwards;\n      }\n    "])),Q)})),K=function(e){var n=Object(l.useState)(!1),t=Object(x.a)(n,2),r=t[0],a=t[1],c=Object(l.useRef)(null),o=Object(l.useRef)(null),i=Object(l.useRef)(null);return Object(l.useEffect)((function(){var n,t;null===(n=c.current)||void 0===n||n.addEventListener("animationend",(function(){setTimeout((function(){return a(!0)}),300)})),null===(t=o.current)||void 0===t||t.addEventListener("animationend",(function(){console.log("refText animation end"),i.current&&(i.current.style.transform="translateY(100vh)",e.okaySplash())}))}),[e]),Object(_.jsx)(W,{ref:i,children:Object(_.jsxs)(G,{hiAni:r,children:[Object(_.jsx)("em",{className:"hi",ref:o,children:"f"}),Object(_.jsx)("em",{className:"first",ref:c,children:"o"}),"rmegust",Object(_.jsx)("em",{className:"second",children:"o"}),"\u2019s ",Object(_.jsx)("em",{className:"hi",children:"T"}),Object(_.jsx)("em",{className:"third",children:"O"}),"Y ",Object(_.jsx)("em",{className:"hi",children:"B"}),Object(_.jsx)("em",{className:"fourth",children:"O"}),"X"]})})},V=t(28),$=t.p+"static/media/Spotify_icon.0e932c0a.png",ee=Object(w.d)(S||(S=Object(k.a)(["\n    from {\n        transform: rotateZ(0deg) translateZ(3px);\n    } to {\n        transform: rotateZ(720deg) translateZ(3px);\n    }\n"]))),ne=Object(w.d)(z||(z=Object(k.a)(["\n    from {\n        transform: translateX(300%);\n    } to {\n        transform: translateX(-200%);\n    }\n"]))),te={getMusicAritst:function(e){return"".concat(e.artists[0].name," - ").concat(e.name)}},re=t.p+"static/media/Spotify_Logo_RGB_White.f48fb565.png";var ae=w.c.h6(C||(C=Object(k.a)(["\n  margin: 6px 0 0;\n  font-size: 12px;\n\n  color: #999;\n"]))),ce=w.c.div(I||(I=Object(k.a)(["\n  & > img {\n    display: block;\n\n    width: 150px;\n    height: 44.96px;\n    background-color: black;\n    padding: 8px;\n    border-radius: 2rem;\n\n    cursor: pointer;\n  }\n\n  &:hover {\n    & > img {\n      background-color: #666;\n    }\n  }\n"]))),oe=w.c.div(L||(L=Object(k.a)(["\n  position: relative;\n  z-index: 13;\n\n  display: flex;\n  flex-direction: column;\n\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  height: 100%;\n"]))),ie=w.c.div(N||(N=Object(k.a)(["\n  position: absolute;\n  top: 0;\n  left: calc(50% - 40px);\n  width: 80px;\n  overflow-x: hidden;\n\n  transform: translateY(-15px);\n\n  transform-style: preserve-3d;\n"]))),se=w.c.h1(T||(T=Object(k.a)(["\n  font-size: 10px;\n  animation: "," 10.5s infinite linear;\n  text-align: end;\n\n  white-space: nowrap;\n"])),ne),le=w.c.img(P||(P=Object(k.a)(["\n  width: 100%;\n  height: 100%;\n\n  object-fit: cover;\n"]))),de=w.c.div(R||(R=Object(k.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 10px;\n  width: 1000px;\n\n  border: 1px solid #999;\n  transform: rotateY(-90deg);\n  transform-origin: 0% 50%;\n\n  background: #999;\n"]))),be=w.c.div(Y||(Y=Object(k.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 1000px;\n  width: 10px;\n\n  border: 1px solid #999;\n\n  transform: rotateX(90deg);\n  transform-origin: 50% 0%;\n\n  background: #ccc;\n"]))),ue=w.c.div(Z||(Z=Object(k.a)(["\n  position: relative;\n\n  width: 10px;\n  height: 10px;\n\n  transform-style: preserve-3d;\n"]))),pe=w.c.div(A||(A=Object(k.a)(["\n  position: relative;\n  z-index: 13;\n  perspective: 1000px;\n"]))),fe=w.c.div(B||(B=Object(k.a)(["\n  position: relative;\n\n  width: 100px;\n  height: 100px;\n\n  & div {\n    box-sizing: border-box;\n  }\n\n  & > div {\n    position: absolute;\n  }\n\n  & > .top {\n    top: 0;\n    left: 0;\n  }\n\n  & > .realtop {\n    top: 0;\n    right: calc(50% - 45px);\n  }\n\n  & > .bottom {\n    bottom: 0;\n    right: calc(50% - 45px);\n  }\n  transform: rotateY(20deg);\n\n  transform-style: preserve-3d;\n"]))),je=w.c.div(D||(D=Object(k.a)(["\n  width: 90px;\n  height: 30px;\n\n  transform-origin: 50% 50%;\n  transform: rotateX(-90deg) translateZ(-15px);\n\n  background-color: #333;\n"]))),he=w.c.div(E||(E=Object(k.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 90px;\n  height: 30px;\n\n  transform-origin: 50% 50%;\n  transform: rotateX(-90deg) translateZ(15px);\n\n  background-color: #333;\n\n  transform-style: preserve-3d;\n"]))),xe=w.c.div(F||(F=Object(k.a)(["\n  top: calc(50% - 5px);\n  left: calc(50% - 5px);\n\n  width: 10px;\n  height: 10px;\n\n  background-color: black;\n  border-radius: 100%;\n  box-sizing: border-box;\n\n  transform: translateZ(5px);\n"]))),me=w.c.div(X||(X=Object(k.a)(["\n  top: calc(50% - 37.5px);\n  left: calc(50% - 37.5px);\n\n  width: 75px;\n  height: 75px;\n\n  border: 1px solid black;\n  border-radius: 100%;\n\n  transform: translateZ(3px);\n\n  background: white;\n\n  overflow: hidden;\n\n  &.play {\n    animation: "," 1.5s infinite linear;\n  }\n"])),ee),Oe=w.c.div(q||(q=Object(k.a)(["\n  top: calc(50% - 37.5px);\n  left: calc(50% - 37.5px);\n\n  width: 75px;\n  height: 75px;\n\n  border: 1px solid black;\n  border-radius: 100%;\n\n  background: black;\n"]))),ge=w.c.div(M||(M=Object(k.a)(["\n  cursor: pointer;\n  position: relative;\n\n  width: 80px;\n  height: 80px;\n\n  border: 1px solid black;\n  border-radius: 100%;\n\n  transform-style: preserve-3d;\n  background: radial-gradient(circle at 100%, #fff 75%, #333 100%);\n\n  & > div {\n    position: absolute;\n  }\n"]))),ve=w.c.div(H||(H=Object(k.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  height: 100%;\n\n  border: 1px solid black;\n  border-radius: 0.5rem;\n  background-color: white;\n\n  transform: translateZ(15px);\n\n  transform-style: preserve-3d;\n"]))),ye=w.c.div(U||(U=Object(k.a)(["\n  width: 100%;\n  height: 100%;\n\n  border: 1px solid #333;\n  border-radius: 0.5rem;\n\n  transform: translateZ(-15px);\n\n  background: #333;\n"]))),ke=function(e){return Object(V.c)((function(e){return e.UserReducer})).user?Object(_.jsx)(pe,{className:"cdp",children:Object(_.jsxs)(fe,{children:[e.item&&Object(_.jsx)(ie,{children:Object(_.jsx)(se,{children:te.getMusicAritst(e.item)})}),Object(_.jsx)(je,{className:"realtop"}),Object(_.jsx)(ve,{className:"top",children:Object(_.jsxs)(ge,{onClick:function(){return e.changeSearchState(!0)},children:[Object(_.jsx)(xe,{}),Object(_.jsx)(me,{ref:e.refCD,children:Object(_.jsx)(le,{src:e.item?e.item.album.images[0].url:$,alt:"AlbumArt"})}),Object(_.jsx)(Oe,{})]})}),Object(_.jsx)(ye,{className:"top"}),Object(_.jsx)(he,{className:"bottom",children:Object(_.jsxs)(ue,{children:[Object(_.jsx)(be,{}),Object(_.jsx)(de,{})]})})]})}):Object(_.jsxs)(oe,{children:[Object(_.jsx)("a",{href:"https://accounts.spotify.com/authorize?client_id=2ec8e7e1e63c4ce699bddec974f14e54&response_type=code&redirect_uri=https://formegusto.github.io/project-barabom/%23/auth&scope=user-read-private%20user-read-email%20streaming%20app-remote-control%20user-read-playback-state%20user-modify-playback-state",children:Object(_.jsx)(ce,{children:Object(_.jsx)("img",{src:re,alt:"logo"})})}),Object(_.jsx)(ae,{children:"Please Spotify Login"})]})},we=t(35),_e=t.p+"static/media/Spotify_Logo_RGB_Black.0d1e5545.png",Se=t(12),ze=t(110);function Ce(e){return["".concat(e),"".concat(e,"/success"),"".concat(e,"/failure")]}var Ie,Le,Ne=Ce("spotify/inject_player"),Te=Object(x.a)(Ne,1)[0],Pe=Ce("spotify/gettracks"),Re=Object(x.a)(Pe,3),Ye=Re[0],Ze=Re[1],Ae=Re[2],Be=Ce("spotify/gettracks/append"),De=Object(x.a)(Be,3),Ee=De[0],Fe=De[1],Xe=(De[2],Ce("spotify/play")),qe=Object(x.a)(Xe,3),Me=qe[0],He=(qe[1],qe[2],Object(ze.a)(Te,(function(e){return e}))),Ue=Object(ze.a)(Ye,(function(e){return{q:e}})),We=Object(ze.a)(Ee,(function(e){var n=Object.assign({},e);return Object(Se.a)({},n)})),Je=Object(ze.a)(Me,(function(e){return Object.assign({},e)})),Qe=Object(V.b)((function(e){var n=e.SpotifyReducer,t=e.LoadingReducer,r=e.UserReducer;return Object(Se.a)(Object(Se.a)(Object(Se.a)({},n),r),{},{loading:t})}),r);var Ge,Ke=w.c.input(Ie||(Ie=Object(k.a)(["\n  ","\n\n  font-size: 1.75rem;\n  padding: 0.75rem 1rem;\n\n  color: #666;\n  box-sizing: border-box;\n  border-radius: 2rem;\n  border: none;\n  outline: none;\n\n  box-shadow: 2px 2px 10px #ccc;\n\n  &::placeholder {\n    color: #eee;\n  }\n"])),(function(e){return e.block&&Object(w.b)(Le||(Le=Object(k.a)(["\n      width: 100%;\n      display: block;\n    "])))})),Ve=function(e){return Object(_.jsx)(Ke,Object(Se.a)({},e))},$e=(t(94),{msToString:function(e){"string"===typeof e&&(e=parseInt(e));var n=Math.floor(e/1e3/60),t=Math.floor(e/1e3%60);return t<10&&(t="0"+t),"".concat(n,":").concat(t)}});var en,nn,tn=w.c.div(Ge||(Ge=Object(k.a)(["\n  position: relative;\n\n  display: flex;\n  align-items: center;\n\n  width: 100%;\n\n  padding: 0.75rem 0;\n  cursor: pointer;\n\n  & > .albumart-block {\n    position: relative;\n  }\n\n  & > .albumart-block > .shadow {\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    width: 72px;\n    height: 72px;\n\n    background-color: rgba(33, 33, 33, 0.1);\n  }\n\n  & img {\n    width: 72px;\n    height: 72px;\n    margin: 0 1rem 0 0;\n    object-fit: cover;\n  }\n\n  & > .track {\n    flex: 1;\n\n    & > .title {\n      font-size: 16px;\n      font-weight: 400;\n      letter-spacing: normal;\n      line-height: 24px;\n      text-transform: none;\n\n      color: #333;\n    }\n\n    & > .artist {\n      font-size: 14px;\n      font-weight: 400;\n      letter-spacing: normal;\n      line-height: 16px;\n      text-transform: none;\n\n      color: #555;\n    }\n  }\n\n  & > .duration {\n    font-size: 14px;\n    font-weight: 400;\n    letter-spacing: normal;\n    line-height: 16px;\n    text-transform: none;\n\n    color: #777;\n  }\n"]))),rn=function(e){var n=e.item,t=e.selectPlayItem;return Object(_.jsxs)(tn,{onClick:function(){return t(n)},children:[Object(_.jsxs)("div",{className:"albumart-block",children:[Object(_.jsx)("img",{className:"albumart",src:n.album.images[0].url,alt:"albumarts"}),Object(_.jsx)("div",{className:"shadow"})]}),Object(_.jsx)("span",{}),Object(_.jsxs)("span",{className:"track",children:[Object(_.jsx)("h1",{className:"title",children:n.name}),Object(_.jsx)("h5",{className:"artist",children:n.artists[0].name})]}),Object(_.jsx)("span",{className:"duration",children:$e.msToString(n.duration_ms)})]})};var an,cn,on=Object(w.d)(en||(en=Object(k.a)(["\n    from {\n        transform: rotateZ(0deg);\n    } to {\n        transform: rotateZ(360deg);\n    }\n"]))),sn=w.c.div(nn||(nn=Object(k.a)(["\n  margin: 0 auto;\n  width: 30px;\n  height: 30px;\n\n  border: 5px solid transparent;\n  border-top: 5px solid ",";\n\n  border-radius: 100%;\n  animation: "," 1s infinite linear;\n"])),(function(e){return e.color?e.color:"#333"}),on),ln=function(e){return Object(_.jsx)(sn,Object(Se.a)({},e))};var dn,bn,un,pn,fn=w.c.div(an||(an=Object(k.a)(["\n  flex: 1;\n\n  box-sizing: border-box;\n  padding: 0 1.75rem;\n\n  overflow-y: scroll;\n\n  &::-webkit-scrollbar {\n    display: none; /* Chrome, Safari, Opera*/\n  }\n"]))),jn=w.c.div(cn||(cn=Object(k.a)(["\n  display: flex;\n\n  align-items: center;\n  justify-content: center;\n\n  padding: 0.75rem 0;\n  box-sizing: border-box;\n"]))),hn=function(e){var n=e.items,t=e.selectPlayItem,r=e.loading,a=e.refList;return Object(_.jsxs)(fn,{ref:a,children:[null===n||void 0===n?void 0:n.map((function(e,n){return Object(_.jsx)(rn,{item:e,selectPlayItem:t},n)})),r&&Object(_.jsx)(jn,{children:Object(_.jsx)(ln,{})})]})},xn=t(20),mn=t.n(xn);var On,gn,vn=w.c.div(dn||(dn=Object(k.a)(["\n  display: flex;\n  flex-flow: column;\n\n  position: absolute;\n  bottom: 0;\n  left: calc(50% - 235px);\n\n  z-index: 255;\n\n  width: 470px;\n  height: 470px;\n  border-radius: 1rem 1rem 0 0;\n\n  background: white;\n  transform: translateY(500px);\n  box-shadow: 4px 4px 4px rgba(0, 0, 0, 0.25);\n  transition: cubic-bezier(0.24, 0.65, 0.38, 0.88) 0.7s;\n\n  ","\n"])),(function(e){return e.isOn&&Object(w.b)(bn||(bn=Object(k.a)(["\n      transform: translateY(10px);\n    "])))})),yn=w.c.div(un||(un=Object(k.a)(["\n  width: 100%;\n\n  padding: 0 1.25rem;\n  box-sizing: border-box;\n"]))),kn=w.c.div(pn||(pn=Object(k.a)(["\n  display: flex;\n  justify-content: space-between;\n\n  width: 100%;\n\n  padding: 1rem 1.25rem;\n  box-sizing: border-box;\n\n  & > img {\n    width: 200px;\n    height: 59.95px;\n  }\n\n  & > span {\n    cursor: pointer;\n\n    font-style: normal;\n    font-weight: 300;\n    font-size: 24px;\n    line-height: 29px;\n    text-transform: uppercase;\n\n    color: #666;\n\n    text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.25);\n  }\n\n  & > span:hover {\n    color: #333;\n  }\n"]))),wn=Qe((function(e){var n=e.onSearch,t=e.changeSearchState,r=e.getTracks,a=e.appendTracks,c=e.tracks,o=e.selectPlayItem,i=e.loading,s=Object(l.useState)(""),d=Object(x.a)(s,2),b=d[0],u=d[1],p=Object(l.useRef)(null),f=Object(l.useRef)(Object(we.a)((function(e){""!==e?(console.log("".concat(e,"\ub85c \uc9c0\uae08\uc694\uccad")),r(e),p.current&&p.current.scrollTo({top:0})):console.log("\uc694\uccad \uc548\ud569\ub2c8\ub2e4.")}),1e3)),j=Object(l.useCallback)((function(e){var n=e.target.value;u(n),f.current(n)}),[]),h=Object(l.useCallback)((function(){u(""),t(!1)}),[t]),m=Object(l.useCallback)((function(){if(this.scrollTop>=this.scrollHeight-this.offsetHeight-80&&(console.log("next Query",c),(null===c||void 0===c?void 0:c.next)&&!i[Ye]&&!i[Ee])){var e=mn.a.parse(c.next.split("?")[1]);a({q:e.query,offset:e.offset})}}),[c,a,i]),O=Object(l.useRef)(Object(we.a)(m,300)),g=Object(l.useCallback)((function(){p.current&&p.current.removeEventListener("scroll",O.current),p.current&&(O.current=Object(we.a)(m,300),p.current.addEventListener("scroll",O.current))}),[m]);return Object(l.useEffect)((function(){g()}),[g]),Object(_.jsxs)(vn,{isOn:n,children:[Object(_.jsxs)(kn,{children:[Object(_.jsx)("img",{src:_e,alt:"Spotify Logo"}),Object(_.jsx)("span",{onClick:h,children:"X"})]}),Object(_.jsx)(yn,{children:Object(_.jsx)(Ve,{value:b,onChange:j,placeholder:"Barabom Only Beauty",block:!0})}),Object(_.jsx)(hn,{items:null===c||void 0===c?void 0:c.items,selectPlayItem:o,loading:i[Ye]||i[Ee],refList:p})]})}));var _n,Sn,zn,Cn,In,Ln,Nn,Tn=w.c.div(On||(On=Object(k.a)(["\n  position: absolute;\n  bottom: 150px;\n\n  z-index: 13;\n\n  flex: 1;\n\n  width: 240px;\n  height: 100px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),Pn=w.c.div(gn||(gn=Object(k.a)(["\n  padding: 0.5rem 0;\n\n  box-sizing: border-box;\n\n  text-align: center;\n\n  font-size: 12px;\n  line-height: 16px;\n  color: #333;\n\n  width: 100%;\n  height: 100%;\n\n  overflow-y: scroll;\n  &::-webkit-scrollbar {\n    display: none; /* Chrome, Safari, Opera*/\n  }\n"]))),Rn=function(e){return Object(_.jsx)(Tn,{children:e.loading?Object(_.jsx)(ln,{}):""!==e.lyrics&&Object(_.jsx)(Pn,{dangerouslySetInnerHTML:{__html:e.lyrics}})})},Yn=t(61);var Zn=w.c.h6(_n||(_n=Object(k.a)(["\n  font-style: normal;\n  font-weight: normal;\n  font-size: 8px;\n  line-height: 10px;\n  color: #ccc;\n  margin: 0.25rem 0;\n  /* identical to box height */\n\n  text-transform: lowercase;\n"]))),An=w.c.div(Sn||(Sn=Object(k.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 1;\n\n  & > * {\n    text-align: right;\n  }\n"]))),Bn=w.c.h6(zn||(zn=Object(k.a)(["\n  font-style: normal;\n  font-weight: normal;\n  font-size: 8px;\n  line-height: 10px;\n  /* identical to box height */\n\n  text-transform: lowercase;\n"]))),Dn=w.c.h1(Cn||(Cn=Object(k.a)(["\n  font-style: normal;\n  font-weight: normal;\n  font-size: 48px;\n  line-height: 59px;\n  /* identical to box height */\n\n  text-transform: uppercase;\n\n  color: #000000;\n"]))),En=w.c.div(In||(In=Object(k.a)(["\n  display: flex;\n  flex-direction: column;\n  position: relative;\n\n  width: 500px;\n"]))),Fn=w.c.div(Ln||(Ln=Object(k.a)(["\n  position: relative;\n  display: flex;\n\n  width: 500px;\n  height: 500px;\n\n  background-repeat: no-repeat;\n  background-size: cover;\n\n  overflow: hidden;\n"]))),Xn=w.c.div(Nn||(Nn=Object(k.a)(["\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n\n  width: 500px;\n  height: 500px;\n\n  background: white;\n\n  & > .cdp {\n    position: absolute;\n    top: 125px;\n    /* left: calc(50% - 70px); */\n  }\n"]))),qn=function(e){return Object(_.jsxs)(En,{children:[Object(_.jsxs)(An,{children:[Object(_.jsx)(Dn,{children:"Barabom"}),Object(_.jsx)(Bn,{children:"copyright \xa9 iamformegusto"}),Object(_.jsx)(Yn.MobileView,{children:Object(_.jsx)(Zn,{children:"Mobile not supported"})})]}),Object(_.jsxs)(Fn,{children:[Object(_.jsx)(Xn,{children:Object(_.jsx)(ke,{changeSearchState:e.changeSearchState,item:e.item,refCD:e.refCD})}),Object(_.jsx)(wn,{onSearch:e.onSearch,changeSearchState:e.changeSearchState,selectPlayItem:e.selectPlayItem}),Object(_.jsx)(Rn,{loading:e.loading,lyrics:e.lyrics})]})]})};var Mn=Qe((function(e){var n=e.play,t=e.player,r=e.injectPlayer,a=e.user,c=Object(l.useState)(!1),o=Object(x.a)(c,2),i=o[0],s=o[1],d=Object(l.useState)(null),b=Object(x.a)(d,2),u=b[0],p=b[1],m=Object(l.useState)(!1),g=Object(x.a)(m,2),v=g[0],k=g[1],w=Object(l.useState)(""),S=Object(x.a)(w,2),z=S[0],C=S[1],I=Object(l.useRef)(null),L=Object(l.useState)(!1),N=Object(x.a)(L,2),T=N[0],P=N[1],R=Object(l.useCallback)((function(){P(!0)}),[]);Object(l.useEffect)((function(){if(a){window.onSpotifyWebPlaybackSDKReady=function(){var e="".concat(localStorage.getItem("access_token")),n=new window.Spotify.Player({name:"Web Playback SDK Quick Start Player",getOAuthToken:function(n){n(e)}});n.addListener("player_state_changed",(function(e){console.log(JSON.stringify(e)),I.current&&(e.paused?(I.current.classList.remove("play"),p(null)):I.current.classList.add("play"))})),n.addListener("ready",(function(e){var t=e.device_id;console.log("Ready with Device ID",t),n.device_id=t,r(n)})),n.addListener("not_ready",(function(e){var n=e.device_id;console.log("Device ID is not ready for playback",n)})),n.connect(),n.on("initialization_error",(function(e){var n=e.message;console.error("Failed to initialize",n)})),n.on("authentication_error",(function(e){var n=e.message;console.error("Failed to authenticate",n)})),n.on("account_error",(function(e){var n=e.message;console.error("Failed to validate Spotify account",n)})),n.on("playback_error",(function(e){var n=e.message;console.error("Failed to perform playback",n)}))};var e=document.createElement("script");e.src="https://sdk.scdn.co/spotify-player.js",e.async=!0,document.body.appendChild(e)}}),[r,a]);var Y=Object(l.useCallback)((function(e){s(e)}),[]),Z=Object(l.useCallback)((function(e){k(e)}),[]),A=Object(l.useCallback)(function(){var e=Object(h.a)(f.a.mark((function e(r){var a,c,o,i,l,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!1),p(r),Z(!0),e.prev=3,e.next=6,y(r.artists[0].name,r.name);case 6:if(a=e.sent,console.log(a),0!==a.length){e.next=39;break}return e.next=11,b=r.artists[0].name,O.get("".concat("https://musicbrainz.org/ws/2","/artist?query=alias:").concat(b,"&fmt=json"));case 11:if(0===(c=e.sent).data.artists.length){e.next=37;break}console.log(c.data.artists[0].aliases),o=c.data.artists[0].aliases,i=Object(j.a)(o),e.prev=16,i.s();case 18:if((l=i.n()).done){e.next=29;break}return d=l.value,e.next=22,y(d["sort-name"],r.name);case 22:if(a=e.sent,console.log(a),!a.hasOwnProperty("lyrics")){e.next=27;break}return C(a.lyrics.lyrics_body.replaceAll("\n","<br/>")),e.abrupt("break",29);case 27:e.next=18;break;case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(16),i.e(e.t0);case 34:return e.prev=34,i.f(),e.finish(34);case 37:e.next=40;break;case 39:C(a.lyrics.lyrics_body.replaceAll("\n","<br/>"));case 40:e.next=45;break;case 42:e.prev=42,e.t1=e.catch(3),console.error(e.t1);case 45:Z(!1),n({spotify_uri:r.uri,device_id:t.device_id});case 47:case"end":return e.stop()}var b}),e,null,[[3,42],[16,31,34,37]])})));return function(n){return e.apply(this,arguments)}}(),[n,t,Z]);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(K,{okaySplash:R}),Object(_.jsx)(qn,{onSearch:i,changeSearchState:Y,item:u,selectPlayItem:A,refCD:I,lyrics:z,splashOkay:T,loading:v})]})}));var Hn,Un=function(){return Object(_.jsx)(Mn,{})};var Wn=w.c.div(Hn||(Hn=Object(k.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n\n  width: 100vw;\n  height: 100vh;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),Jn=function(){return Object(_.jsx)(Wn,{children:Object(_.jsx)(ln,{})})};var Qn=function(){return Object(_.jsx)(Jn,{})},Gn="https://accounts.spotify.com",Kn=function(e){return O.get("".concat("https://api.spotify.com","/v1/me"),{headers:{Authorization:"Bearer ".concat(e)}})},Vn=function(e){return O.post("".concat(Gn,"/api/token"),mn.a.stringify({code:e,grant_type:"authorization_code",redirect_uri:"https://formegusto.github.io/project-barabom/#/auth"}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},auth:{username:"2ec8e7e1e63c4ce699bddec974f14e54",password:"1e89df8c7cd743bc9c3727f0ab779c5b"}})};var $n=function(e){return Object(l.useEffect)((function(){Object(h.a)(f.a.mark((function n(){var t,r,a,c,o,i;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=mn.a.parse(e.location.search,{ignoreQueryPrefix:!0}),r=t.code,n.prev=1,n.next=4,Vn(r);case 4:a=n.sent,console.log(a),c=a.data,o=c.access_token,i=c.refresh_token,localStorage.setItem("access_token",o),localStorage.setItem("refresh_token",i),setTimeout((function(){window.location.href="/project-barabom"}),3e3),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),console.error(n.t0);case 15:case"end":return n.stop()}}),n,null,[[1,12]])})))()})),Object(_.jsx)(Qn,{})};var et=function(e){return console.log(),Object(l.useEffect)((function(){"/%2Fauth"===e.location.pathname&&(window.location.href="".concat("https://formegusto.github.io/project-barabom/#/auth").concat(window.location.search))})),Object(_.jsx)(_.Fragment,{})};var nt,tt,rt,at=function(){return Object(_.jsxs)(u.c,{children:[Object(_.jsx)(u.a,{path:"/",component:Un,exact:!0}),Object(_.jsx)(u.a,{path:"/auth",component:$n,exact:!0}),Object(_.jsx)(u.a,{component:et})]})},ct=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,111)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),r(e),a(e),c(e),o(e)}))},ot=t(21),it=t(15),st=t(109),lt=t(23),dt=Object(st.a)((nt={},Object(it.a)(nt,Te,(function(e,n){return Object(lt.a)(e,(function(e){e.player=n.payload}))})),Object(it.a)(nt,Fe,(function(e,n){return Object(lt.a)(e,(function(e){var t;e.tracks=Object(Se.a)(Object(Se.a)({},n.payload.tracks),{},{items:null===(t=e.tracks)||void 0===t?void 0:t.items.concat(n.payload.tracks.items)})}))})),Object(it.a)(nt,Ze,(function(e,n){return Object(lt.a)(e,(function(e){e.tracks=n.payload.tracks}))})),Object(it.a)(nt,Ae,(function(e){return Object(lt.a)(e,(function(e){e.tracks=null}))})),nt),{tracks:null,player:null}),bt="loading/start",ut="loading/finish",pt=Object(st.a)((tt={},Object(it.a)(tt,bt,(function(e,n){return Object(Se.a)(Object(Se.a)({},e),{},Object(it.a)({},n.payload,!0))})),Object(it.a)(tt,ut,(function(e,n){return Object(Se.a)(Object(Se.a)({},e),{},Object(it.a)({},n.payload,!1))})),tt),{}),ft=Ce("users/get"),jt=Object(x.a)(ft,3),ht=jt[0],xt=jt[1],mt=jt[2],Ot=Object(st.a)((rt={},Object(it.a)(rt,xt,(function(e,n){return Object(lt.a)(e,(function(e){e.user=n.payload}))})),Object(it.a)(rt,mt,(function(e,n){return Object(lt.a)(e,(function(e){e.error=n.payload}))})),rt),{user:null,error:null}),gt=Object(ot.combineReducers)({SpotifyReducer:dt,LoadingReducer:pt,UserReducer:Ot}),vt=t(62),yt=t(64),kt=t(11),wt=Object(ze.a)(bt,(function(e){return e})),_t=Object(ze.a)(ut,(function(e){return e}));function St(e,n){var t="".concat(e,"/success"),r="".concat(e,"/failure");return f.a.mark((function a(c){var o;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(kt.c)(wt(e));case 2:return a.prev=2,a.next=5,Object(kt.b)(n,c.payload);case 5:return o=a.sent,a.next=8,Object(kt.c)({type:t,payload:o.data});case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(2),a.next=14,Object(kt.c)({type:r,payload:a.t0,error:!0});case 14:return a.next=16,Object(kt.c)(_t(e));case 16:case"end":return a.stop()}}),a,null,[[2,10]])}))}var zt="https://api.spotify.com",Ct=function(e){var n=e.q,t=e.offset,r=void 0===t?1:t;return O.get("".concat(zt,"/v1/search?").concat(mn.a.stringify({query:n,type:"track",market:"US",limit:10,offset:r})),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}})},It=f.a.mark(Pt),Lt=St(Ye,Ct),Nt=St(Ee,Ct),Tt=St(Me,(function(e){var n=e.spotify_uri,t=e.device_id;return O.put("".concat(zt,"/v1/me/player/play?").concat(mn.a.stringify({device_id:t})),{uris:[n]},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token")),"Content-Type":"application/json"}})}));function Pt(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(kt.d)(Ye,Lt);case 2:return e.next=4,Object(kt.d)(Me,Tt);case 4:return e.next=6,Object(kt.d)(Ee,Nt);case 6:case"end":return e.stop()}}),It)}var Rt=f.a.mark(Zt),Yt=f.a.mark(At);function Zt(e){var n,t,r,a,c;return f.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(kt.c)(wt(ht));case 2:return o.prev=2,o.next=5,Kn(e.payload.access_token);case 5:return n=o.sent,o.next=8,Object(kt.c)({type:xt,payload:n.data});case 8:o.next=36;break;case 10:if(o.prev=10,o.t0=o.catch(2),"The access token expired"!==o.t0.response.data.error.message){o.next=36;break}if(o.prev=14,"undefined"!==e.payload.refresh_token){o.next=17;break}throw new Error("Need a New Login");case 17:return o.next=19,i=e.payload.refresh_token,O.post("".concat(Gn,"/api/token"),mn.a.stringify({grant_type:"refresh_token",refresh_token:i,client_id:"2ec8e7e1e63c4ce699bddec974f14e54"}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},auth:{username:"2ec8e7e1e63c4ce699bddec974f14e54",password:"1e89df8c7cd743bc9c3727f0ab779c5b"}});case 19:return t=o.sent,r=t.data,a=r.access_token,c=r.refresh_token,localStorage.setItem("access_token",a),localStorage.setItem("refresh_token",c),o.next=25,Kn(a);case 25:return t=o.sent,o.next=28,Object(kt.c)({type:xt,payload:t.data});case 28:o.next=36;break;case 30:return o.prev=30,o.t1=o.catch(14),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),o.next=36,Object(kt.c)({type:mt,payload:o.t1,error:!0});case 36:return o.prev=36,o.next=39,Object(kt.c)(_t(ht));case 39:return o.finish(36);case 40:case"end":return o.stop()}var i}),Rt,null,[[2,10,36,40],[14,30]])}function At(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(kt.d)(ht,Zt);case 2:case"end":return e.stop()}}),Yt)}var Bt=f.a.mark(Dt);function Dt(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(kt.a)([Pt(),At()]);case 2:case"end":return e.stop()}}),Bt)}var Et=Object(ze.a)(ht,(function(e){return e})),Ft=t(63),Xt="428px",qt="768px",Mt="1024px",Ht={device:{mobile:"screen and (max-width: ".concat(Xt,")"),tablet:"screen and (max-width: ".concat(qt,")"),laptop:"screen and (max-width: ".concat(Mt,")"),mobileHeight:"screen and (max-height: ".concat(Xt,")"),tabletHeight:"screen and (max-height: ".concat(qt,")")}},Ut=Object(yt.a)(),Wt=Object(ot.createStore)(gt,Object(vt.composeWithDevTools)(Object(ot.applyMiddleware)(Ut)));Ut.run(Dt);!function(){var e=localStorage.getItem("access_token"),n=localStorage.getItem("refresh_token");e&&n&&Wt.dispatch(Et({access_token:e,refresh_token:n}))}(),b.a.render(Object(_.jsx)(w.a,{theme:Ht,children:Object(_.jsx)(V.a,{store:Wt,children:Object(_.jsx)(Ft.a,{children:Object(_.jsx)(at,{})})})}),document.getElementById("root")),ct()},69:function(e,n,t){}},[[108,1,2]]]);
//# sourceMappingURL=main.f39b91c7.chunk.js.map